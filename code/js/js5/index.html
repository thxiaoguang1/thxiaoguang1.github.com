<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>淘宝放大镜</title>
	<style type="text/css">
		#small{
			width: 190px;
			height: 220px;
			position: absolute;
			left: 0;
			top: 0;
			cursor: move;
		}
		#small span{
			width: 80px;
			height: 80px;
			background: yellow;
			opacity: 0.5;
			position: absolute;
			right: 0;
			bottom: 0;
			display: none;
		}
		#big{
			width: 500px;
			height: 500px;
			position: absolute;
			left: 200px;
			top: 0;
			display: none;
			overflow: hidden;
		}
		#big img{
			position: absolute;
			left: 0;
			top: 0;
		}


	</style>
	<script type="text/javascript">
		window.onload=function(){
			var oSmall = document.getElementById('small');
			var oBig = document.getElementById('big');
			var oS = oSmall.children[1];
			var oImg = oBig.children[0];
			oSmall.onmouseenter=function(){
				oS.style.display='block';
				oBig.style.display='block';
			};
			oSmall.onmouseleave=function(){
				oS.style.display='none';
				oBig.style.display='none';
			};
			oSmall.onmousemove=function(ev){
				var oEvent = ev || event;
				var l = oEvent.clientX-oS.offsetWidth/2;
				var t = oEvent.clientY-oS.offsetHeight/2;
				if(l<0){
					l=0;
				}
				if(l>oSmall.offsetWidth-oS.offsetWidth){
					l=oSmall.offsetWidth-oS.offsetWidth;
				}
				if(t<0){
					t=0;
				}
				if(t>oSmall.offsetHeight-oS.offsetHeight){
					t=oSmall.offsetHeight-oS.offsetHeight;
				}
				oS.style.left=l+'px';
				oS.style.top=t+'px';
				var scaleX = oS.offsetLeft/(oSmall.offsetWidth-oS.offsetWidth);
				var scaleY = oS.offsetTop/(oSmall.offsetHeight-oS.offsetHeight);
				oImg.style.left=-scaleX*(oImg.offsetWidth-oBig.offsetWidth)+'px';
				oImg.style.top=-scaleY*(oImg.offsetHeight-oBig.offsetHeight)+'px';
			}
		};



	</script>
</head>
<body>
	<div id="box">
	<div id="small">
		<img src="images/2.jpg">
		<span></span>
	</div>
	<div id="big">
		<img src="images/1.jpg">
	</div>
</div>

</body>
</html>