<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	*{padding:0;margin:0;}
	li{list-style: none;}
	ul{width:400px;border:1px solid #ccc;margin:10px;float: left;}

	</style>
	<script type="text/javascript">
			function rng(n,m){

				return parseInt(Math.random()*(m-n))+n;
			}
			window.onload=function(){
				var aUl=document.getElementsByTagName('ul');
					function createli(){
					var oLi=document.createElement('li');
						oLi.style.width='400px';
						oLi.style.height=rng(200,500)+'px';
						var r=rng(0,256);
						var g=rng(0,256);
						var b=rng(0,256);
						oLi.style.background='rgb('+r+','+g+','+b+')';
						return oLi;

					}

				function createLi20(){
					for(var i=0;i<20;i++){
					
						var oLi=createli();
						var arr=[];
						for(var j=0;j<aUl.length;j++){
							arr.push(aUl[j]);
						}
					arr.sort(function(ul1,ul2){

						return ul1.offsetHeight-ul2.offsetHeight;
					});



					arr[0].appendChild(oLi);
					}
				}
					createLi20();


					window.onresize=window.onscroll=function(){
						var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
						var oH = document.documentElement.clientHeight;
							var rightdis=scrollTop+oH;
						var leftdis=document.documentElement.scrollHeight;
						if(rightdis>=leftdis-300)
						{
								createLi20();
						}


							

					}

			}



	</script>
</head>
<body>
<div>
	<ul></ul>
	<ul></ul>
	<ul></ul>
</div>
</body>
</html>